<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="/default.xsl"?>
<fr:tree xmlns:fr="http://www.forester-notes.org" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:xml="http://www.w3.org/XML/1998/namespace" root="false" base-url="/">
  <fr:frontmatter>
    <fr:authors>
      <fr:author>
        <fr:link href="/jonmsterling/" title="Jon Sterling" uri="https://www.jonmsterling.com/jonmsterling/" display-uri="jonmsterling" type="local">Jon Sterling</fr:link>
      </fr:author>
    </fr:authors>
    <fr:date>
      <fr:year>2025</fr:year>
      <fr:month>5</fr:month>
      <fr:day>18</fr:day>
    </fr:date>
    <fr:uri>https://www.jonmsterling.com/jms-01B7/</fr:uri>
    <fr:display-uri>jms-01B7</fr:display-uri>
    <fr:route>/jms-01B7/</fr:route>
    <fr:title text="Weeknotes 2025-W20 › Preparing for Forester 5.0: June?"><fr:link href="/2025-W20/" title="Weeknotes 2025-W20" uri="https://www.jonmsterling.com/2025-W20/" display-uri="2025-W20" type="local">Weeknotes 2025-W20</fr:link> › Preparing for <fr:link href="https://www.forester-notes.org/jms-011P/" title="Forester 5.0" uri="https://www.forester-notes.org/jms-011P/" display-uri="https://www.forester-notes.org/jms-011P/" type="local">Forester 5.0</fr:link>: June?</fr:title>
  </fr:frontmatter>
  <fr:mainmatter>
    <html:p>I would like to get a “beta” release of <fr:link href="https://www.forester-notes.org/jms-011P/" title="Forester 5.0" uri="https://www.forester-notes.org/jms-011P/" display-uri="https://www.forester-notes.org/jms-011P/" type="local">Forester 5.0</fr:link> out by the end of the month. What this would mean is that <html:em>advanced</html:em> users are invited to try it out and start using it without fear of huge changes wrecking their migration daily (which has been the status quo for several months unfortunately). To that end, <fr:link href="/kentookura/" title="Kento Okura" uri="https://www.jonmsterling.com/kentookura/" display-uri="kentookura" type="local">Kento</fr:link> and I have been polishing things up and fixing the long tail of issues that would block a release. Of course, I have been dog-fooding 5.0 for many months.</html:p>
    <html:p>One improvement to the lightweight federation support is that when you federate with a <html:em>published</html:em> forest, you can choose to have links get routed directly to the published version rather than rendering those trees directly in your own forest. There are some trade-offs here, and obviously the current state of federation does not reflect what we will be doing in the future; the current version is meant only to “stem the bleeding” for certain institutional users of Forester while we come up with a better approach.</html:p>
  </fr:mainmatter>
  <fr:backmatter>
    <fr:tree show-metadata="false" hidden-when-empty="true">
      <fr:frontmatter>
        <fr:authors />
        <fr:title text="References">References</fr:title>
      </fr:frontmatter>
      <fr:mainmatter />
    </fr:tree>
    <fr:tree show-metadata="false" hidden-when-empty="true">
      <fr:frontmatter>
        <fr:authors />
        <fr:title text="Context">Context</fr:title>
      </fr:frontmatter>
      <fr:mainmatter>
        <fr:tree show-metadata="true" expanded="false" toc="false" numbered="false">
          <fr:frontmatter>
            <fr:authors>
              <fr:author>
                <fr:link href="/jonmsterling/" title="Jon Sterling" uri="https://www.jonmsterling.com/jonmsterling/" display-uri="jonmsterling" type="local">Jon Sterling</fr:link>
              </fr:author>
            </fr:authors>
            <fr:date>
              <fr:year>2025</fr:year>
              <fr:month>5</fr:month>
              <fr:day>18</fr:day>
            </fr:date>
            <fr:uri>https://www.jonmsterling.com/2025-W20/</fr:uri>
            <fr:display-uri>2025-W20</fr:display-uri>
            <fr:route>/2025-W20/</fr:route>
            <fr:title text="Weeknotes 2025-W20">Weeknotes 2025-W20</fr:title>
          </fr:frontmatter>
          <fr:mainmatter>
            <html:p>This had been a hectic week without a lot to show for it. Over the weekend, I wrapped up the last of my <fr:link href="/oopsla-2024-25/" title="OOPSLA 2024–25: Object-Oriented Programming, Systems, Languages &amp; Applications" uri="https://www.jonmsterling.com/oopsla-2024-25/" display-uri="oopsla-2024-25" type="local">OOPSLA 2025–25</fr:link> reviews, just in time to get whacked with a couple dozen Part II dissertations to mark in the coming weeks.</html:p>
            <fr:tree show-metadata="false">
              <fr:frontmatter>
                <fr:authors>
                  <fr:author>
                    <fr:link href="/jonmsterling/" title="Jon Sterling" uri="https://www.jonmsterling.com/jonmsterling/" display-uri="jonmsterling" type="local">Jon Sterling</fr:link>
                  </fr:author>
                </fr:authors>
                <fr:date>
                  <fr:year>2025</fr:year>
                  <fr:month>5</fr:month>
                  <fr:day>18</fr:day>
                </fr:date>
                <fr:uri>https://www.jonmsterling.com/jms-01B6/</fr:uri>
                <fr:display-uri>jms-01B6</fr:display-uri>
                <fr:route>/jms-01B6/</fr:route>
                <fr:title text="Domains and Classifying Topoi">
                  <fr:link href="/sterling-ye-2025/" title="Domains and Classifying Topoi" uri="https://www.jonmsterling.com/sterling-ye-2025/" display-uri="sterling-ye-2025" type="local">Domains and Classifying Topoi</fr:link>
                </fr:title>
              </fr:frontmatter>
              <fr:mainmatter>
                <html:p>Together with my PhD student <fr:link href="/lingyuanye/" title="Lingyuan Ye" uri="https://www.jonmsterling.com/lingyuanye/" display-uri="lingyuanye" type="local">Lingyuan Ye</fr:link> I have been putting the finishing touches on a very exciting (to me) manuscript on a connection between synthetic domain theory and the theory of classifying toposes. I will say more about this after we have put our manuscript on the arXiv; for now, I will just say that this is the kind of work I had been hoping to do for a few years now and it has been a pleasure to work on it with Lingyuan, who comes to me week after week with deep insights and results.</html:p>
              </fr:mainmatter>
            </fr:tree>
            <fr:tree show-metadata="false">
              <fr:frontmatter>
                <fr:authors>
                  <fr:author>
                    <fr:link href="/jonmsterling/" title="Jon Sterling" uri="https://www.jonmsterling.com/jonmsterling/" display-uri="jonmsterling" type="local">Jon Sterling</fr:link>
                  </fr:author>
                </fr:authors>
                <fr:date>
                  <fr:year>2025</fr:year>
                  <fr:month>5</fr:month>
                  <fr:day>18</fr:day>
                </fr:date>
                <fr:uri>https://www.jonmsterling.com/jms-01B7/</fr:uri>
                <fr:display-uri>jms-01B7</fr:display-uri>
                <fr:route>/jms-01B7/</fr:route>
                <fr:title text="Preparing for Forester 5.0: June?">Preparing for <fr:link href="https://www.forester-notes.org/jms-011P/" title="Forester 5.0" uri="https://www.forester-notes.org/jms-011P/" display-uri="https://www.forester-notes.org/jms-011P/" type="local">Forester 5.0</fr:link>: June?</fr:title>
              </fr:frontmatter>
              <fr:mainmatter>
                <html:p>I would like to get a “beta” release of <fr:link href="https://www.forester-notes.org/jms-011P/" title="Forester 5.0" uri="https://www.forester-notes.org/jms-011P/" display-uri="https://www.forester-notes.org/jms-011P/" type="local">Forester 5.0</fr:link> out by the end of the month. What this would mean is that <html:em>advanced</html:em> users are invited to try it out and start using it without fear of huge changes wrecking their migration daily (which has been the status quo for several months unfortunately). To that end, <fr:link href="/kentookura/" title="Kento Okura" uri="https://www.jonmsterling.com/kentookura/" display-uri="kentookura" type="local">Kento</fr:link> and I have been polishing things up and fixing the long tail of issues that would block a release. Of course, I have been dog-fooding 5.0 for many months.</html:p>
                <html:p>One improvement to the lightweight federation support is that when you federate with a <html:em>published</html:em> forest, you can choose to have links get routed directly to the published version rather than rendering those trees directly in your own forest. There are some trade-offs here, and obviously the current state of federation does not reflect what we will be doing in the future; the current version is meant only to “stem the bleeding” for certain institutional users of Forester while we come up with a better approach.</html:p>
              </fr:mainmatter>
            </fr:tree>
            <fr:tree show-metadata="false">
              <fr:frontmatter>
                <fr:authors>
                  <fr:author>
                    <fr:link href="/jonmsterling/" title="Jon Sterling" uri="https://www.jonmsterling.com/jonmsterling/" display-uri="jonmsterling" type="local">Jon Sterling</fr:link>
                  </fr:author>
                </fr:authors>
                <fr:date>
                  <fr:year>2025</fr:year>
                  <fr:month>5</fr:month>
                  <fr:day>18</fr:day>
                </fr:date>
                <fr:uri>https://www.jonmsterling.com/jms-01B8/</fr:uri>
                <fr:display-uri>jms-01B8</fr:display-uri>
                <fr:route>/jms-01B8/</fr:route>
                <fr:title text="Rowing at Clare College">Rowing at <fr:link href="/jms-00GP/" title="Clare College" uri="https://www.jonmsterling.com/jms-00GP/" display-uri="jms-00GP" type="local">Clare College</fr:link></fr:title>
              </fr:frontmatter>
              <fr:mainmatter>
                <html:p>In the past two weeks I’ve been learning how to row under the patient tutelage of <fr:link href="/nigelwoodcock/" title="Nigel Woodcock" uri="https://www.jonmsterling.com/nigelwoodcock/" display-uri="nigelwoodcock" type="local">Nigel Woodcock</fr:link>, an Emeritus Fellow at <fr:link href="/jms-00GP/" title="Clare College" uri="https://www.jonmsterling.com/jms-00GP/" display-uri="jms-00GP" type="local">Clare College</fr:link> who has been looking after our Boat Club for 25 years now. The motions of rowing are still unnatural for me, but I am improving (albeit slowly); as an arachnophobe, I do not relish the occasional spider in the boat, but otherwise I’m enjoying the experience.</html:p>
                <html:p>Getting to the boathouse from the other side of the river is really dangerous—there is the round-a-bout from Hell guarding Midsummer Common, and there seems to be no way to cross any of the several connected streets without three different vehicles whipping past you in three different directions simultaneously. Somehow the whole thing works like clockwork—unless you are on foot or on a bicycle and don't have Alexander the Great–level self-confidence. Almost lost my life on Friday… It would be a great idea to have any kind of pedestrian-friendly crosswalk there. In the meanwhile, I think I want to try and find a different route to the Common.</html:p>
              </fr:mainmatter>
            </fr:tree>
            <fr:tree show-metadata="false">
              <fr:frontmatter>
                <fr:authors>
                  <fr:author>
                    <fr:link href="/jonmsterling/" title="Jon Sterling" uri="https://www.jonmsterling.com/jonmsterling/" display-uri="jonmsterling" type="local">Jon Sterling</fr:link>
                  </fr:author>
                </fr:authors>
                <fr:date>
                  <fr:year>2025</fr:year>
                  <fr:month>5</fr:month>
                  <fr:day>18</fr:day>
                </fr:date>
                <fr:uri>https://www.jonmsterling.com/jms-01B9/</fr:uri>
                <fr:display-uri>jms-01B9</fr:display-uri>
                <fr:route>/jms-01B9/</fr:route>
                <fr:title text="More on involuntary lighting in the Lab">More on <fr:link href="/jms-01B5/" title="Weeknotes 2025-W19 › Rethinking community in the Computer Lab" uri="https://www.jonmsterling.com/jms-01B5/" display-uri="jms-01B5" type="local">involuntary lighting in the Lab</fr:link></fr:title>
              </fr:frontmatter>
              <fr:mainmatter>
                <html:p>Last week I commented on the deeply hostile lighting transition being imposed on the denizens of the Computer Lab. Although we appear to have inadvertently triggered this transition in the course of trying to get our lighting replaced in the lecture theatres (which really needed to be done!), it seems this change is coming from Heaven and short of dethroning God, we wouldn’t have been able to prevent it.</html:p>
                <html:p>With that said, things are looking up. It has been communicated to us that we will be allowed to request light switches to manually control the lights; it remains to be seen whether these switches will fully override the automatic (mis)behaviour, or if it just means that we will have the privilege of getting up to switch the light back on when it goes off at random times, or of getting up to switch it off when it goes on at random times. Anyway, I’m sincerely hoping that the accommodation provided is a <html:em>traditional</html:em> light switch that totally disables the automatic functionality.</html:p>
                <html:p>Some members of the faculty have complained about the quality of the light itself, pointing out that it induces migraine. I sincerely hope that this is not the case, and I would just say that the current flourescent lights that we have in our offices are so horrible in terms of the light they cast that it is hard to imagine something even worse. So maybe the LED will be better.</html:p>
                <fr:tree show-metadata="false">
                  <fr:frontmatter>
                    <fr:authors>
                      <fr:author>
                        <fr:link href="/jonmsterling/" title="Jon Sterling" uri="https://www.jonmsterling.com/jonmsterling/" display-uri="jonmsterling" type="local">Jon Sterling</fr:link>
                      </fr:author>
                    </fr:authors>
                    <fr:date>
                      <fr:year>2025</fr:year>
                      <fr:month>5</fr:month>
                      <fr:day>18</fr:day>
                    </fr:date>
                    <fr:title text="How do we respond to fake “sustainability” drives?">How do we respond to fake “sustainability” drives?</fr:title>
                  </fr:frontmatter>
                  <fr:mainmatter>
                    <html:p>Like I said, I hope the new lighting will be satisfactory. If not, I will request the whole thing be ripped out entirely, and I’ll install the most energy-intensive lamp I can find—something as powerful and expensive to run as the Sun itself. I want the whole Computer Lab to feel the dip when I switch on the power…</html:p>
                    <html:p>Someone has to learn that there will always be a way to maliciously comply with hostile “sustainability” updates that negates the supposed benefits entirely; and that this response is <html:em>guaranteed</html:em> when “sustainability” improvements are made without genuine consultation or regard for the required functionality and the basic rights of workers. Fake consultation, where we are given the opportunity to “offer our feedback” but no credible pathway toward this feedback having any impact on a decision that already has been made, is deeply insulting and we should respond appropriately whilst we still can.</html:p>
                  </fr:mainmatter>
                </fr:tree>
              </fr:mainmatter>
            </fr:tree>
          </fr:mainmatter>
        </fr:tree>
      </fr:mainmatter>
    </fr:tree>
    <fr:tree show-metadata="false" hidden-when-empty="true">
      <fr:frontmatter>
        <fr:authors />
        <fr:title text="Backlinks">Backlinks</fr:title>
      </fr:frontmatter>
      <fr:mainmatter />
    </fr:tree>
    <fr:tree show-metadata="false" hidden-when-empty="true">
      <fr:frontmatter>
        <fr:authors />
        <fr:title text="Related">Related</fr:title>
      </fr:frontmatter>
      <fr:mainmatter>
        <fr:tree show-metadata="true" expanded="false" toc="false" numbered="false">
          <fr:frontmatter>
            <fr:authors>
              <fr:author>
                <fr:link href="https://www.forester-notes.org/jonmsterling/" title="Jon Sterling" uri="https://www.forester-notes.org/jonmsterling/" display-uri="https://www.forester-notes.org/jonmsterling/" type="local">Jon Sterling</fr:link>
              </fr:author>
              <fr:contributor>
                <fr:link href="https://www.forester-notes.org/kentookura/" title="Kento Okura" uri="https://www.forester-notes.org/kentookura/" display-uri="https://www.forester-notes.org/kentookura/" type="local">Kento Okura</fr:link>
              </fr:contributor>
            </fr:authors>
            <fr:date>
              <fr:year>2024</fr:year>
              <fr:month>10</fr:month>
              <fr:day>20</fr:day>
            </fr:date>
            <fr:uri>https://www.forester-notes.org/jms-011P/</fr:uri>
            <fr:display-uri>https://www.forester-notes.org/jms-011P/</fr:display-uri>
            <fr:route>https://www.forester-notes.org/jms-011P/</fr:route>
            <fr:title text="Forester 5.0">Forester 5.0</fr:title>
            <fr:taxon>Prerelease</fr:taxon>
          </fr:frontmatter>
          <fr:mainmatter>
            <html:p>This is a major release of Forester that includes many changes under the hood, as well as breaking changes that will require manual adjustments to existing forests. We are sorry for the frustration that these changes may cause to existing users, but we strongly believe that this is necessary for Forester to reach its potential as a tool that enhances rather than replaces the World Wide Web; we also strongly believe that these changes will make Forester more useful for existing users as well as the next thousand users.</html:p>
            <html:p>What will be included in this release is not completely decided, so consider these release notes as an evolving document. My thanks to <fr:link href="https://www.forester-notes.org/kentookura/" title="Kento Okura" uri="https://www.forester-notes.org/kentookura/" display-uri="https://www.forester-notes.org/kentookura/" type="local">Kento Okura</fr:link> and <fr:link href="https://www.forester-notes.org/owenlynch/" title="Owen Lynch" uri="https://www.forester-notes.org/owenlynch/" display-uri="https://www.forester-notes.org/owenlynch/" type="local">Owen Lynch</fr:link> for conversations leading to the design of this release.</html:p>
            <html:p>Many of the changes included here are meant to support the future of Forester as an authoring tool for a new kind of <html:em>Internet of Science</html:em> that will enable the federation of many different forests by extending existing protocols with new hypermedia controls for content transclusion applicable to scientific authoring.</html:p>
            <fr:tree show-metadata="false">
              <fr:frontmatter>
                <fr:authors>
                  <fr:author>
                    <fr:link href="https://www.forester-notes.org/jonmsterling/" title="Jon Sterling" uri="https://www.forester-notes.org/jonmsterling/" display-uri="https://www.forester-notes.org/jonmsterling/" type="local">Jon Sterling</fr:link>
                  </fr:author>
                </fr:authors>
                <fr:date>
                  <fr:year>2024</fr:year>
                  <fr:month>10</fr:month>
                  <fr:day>20</fr:day>
                </fr:date>
                <fr:uri>https://www.forester-notes.org/jms-0126/</fr:uri>
                <fr:display-uri>https://www.forester-notes.org/jms-0126/</fr:display-uri>
                <fr:route>https://www.forester-notes.org/jms-0126/</fr:route>
                <fr:title text="Tl;dr: migration guide">Tl;dr: migration guide</fr:title>
              </fr:frontmatter>
              <fr:mainmatter>
                <html:p>To migrate your forest to <fr:link href="https://www.forester-notes.org/jms-011P/" title="Forester 5.0" uri="https://www.forester-notes.org/jms-011P/" display-uri="https://www.forester-notes.org/jms-011P/" type="local">Forester 5.0</fr:link>, do the following:</html:p>
                <html:ol><html:li>Add a <html:code>url = "https://www.my-forest.com/"</html:code> line under the <html:code>[forest]</html:code> section in your <html:code>forest.toml</html:code>, changing the URL to suit you (see <fr:link href="https://www.forester-notes.org/jms-011Q/" title="Forester 5.0 › Canonical URLs for tree addresses" uri="https://www.forester-notes.org/jms-011Q/" display-uri="https://www.forester-notes.org/jms-011Q/" type="local">§ <fr:contextual-number uri="https://www.forester-notes.org/jms-011Q/" display-uri="https://www.forester-notes.org/jms-011Q/" /></fr:link>). The purpose of the URL is to be able to address trees in your forest from outside of Forester, i.e. on the World Wide Web. Most users of Forester will use their own domain or institutional web storage for this.</html:li>
  <html:li>Remove all usage of <html:code><![CDATA[\transclude/title]]></html:code> and <html:code><![CDATA[\transclude/taxon]]></html:code> (see <fr:link href="https://www.forester-notes.org/jms-011T/" title="Forester 5.0 › Simplifications to the source language › Removing transclusion overrides" uri="https://www.forester-notes.org/jms-011T/" display-uri="https://www.forester-notes.org/jms-011T/" type="local">§ <fr:contextual-number uri="https://www.forester-notes.org/jms-011T/" display-uri="https://www.forester-notes.org/jms-011T/" /></fr:link>).</html:li>
  <html:li>Move all <html:code><![CDATA[\import]]></html:code> declarations to the top-level of any <html:code>.tree</html:code> files, as these can no longer occur in subtrees (see <fr:link href="https://www.forester-notes.org/OYOU/" title="Forester 5.0 › Simplifications to the source language › Removal of imports within subtrees" uri="https://www.forester-notes.org/OYOU/" display-uri="https://www.forester-notes.org/OYOU/" type="local">§ <fr:contextual-number uri="https://www.forester-notes.org/OYOU/" display-uri="https://www.forester-notes.org/OYOU/" /></fr:link>).</html:li>
  <html:li>In your <html:code>forest.toml</html:code> file, replace the <html:code>root = "foo"</html:code> line a new section after the <html:code>[forest]</html:code> block as follows:
  <html:pre><![CDATA[[renderer]
home = "foo"]]></html:pre>
  See <fr:link href="https://www.forester-notes.org/jms-0125/" title="Forester 5.0 › Configuration: the [renderer] section" uri="https://www.forester-notes.org/jms-0125/" display-uri="https://www.forester-notes.org/jms-0125/" type="local">§ <fr:contextual-number uri="https://www.forester-notes.org/jms-0125/" display-uri="https://www.forester-notes.org/jms-0125/" /></fr:link> for more details.</html:li>
  <html:li>Any <html:code><![CDATA[\author]]></html:code> or <html:code><![CDATA[\contributor]]></html:code> attributions must take a tree address as their argument; when you wish to attribute a resource to a person who is not represented by a tree, you can use <html:code><![CDATA[\author/literal{Somebody’s Name}]]></html:code> or <html:code><![CDATA[\contributor/literal{Somebody’s Name}]]></html:code> (see <fr:link href="https://www.forester-notes.org/jms-012N/" title="Forester 5.0 › Changes to attribution links" uri="https://www.forester-notes.org/jms-012N/" display-uri="https://www.forester-notes.org/jms-012N/" type="local">§ <fr:contextual-number uri="https://www.forester-notes.org/jms-012N/" display-uri="https://www.forester-notes.org/jms-012N/" /></fr:link>).</html:li>
  <html:li>Take into account the renaming of several built-in relations (see <fr:link href="https://www.forester-notes.org/jms-013C/" title="Forester 5.0 › New datalog-based query engine › Renamed built-in relations" uri="https://www.forester-notes.org/jms-013C/" display-uri="https://www.forester-notes.org/jms-013C/" type="local">§ <fr:contextual-number uri="https://www.forester-notes.org/jms-013C/" display-uri="https://www.forester-notes.org/jms-013C/" /></fr:link>).</html:li>
  <html:li>Rewrite any queries to use the new datalog engine (see <fr:link href="https://www.forester-notes.org/jms-013A/" title="Forester 5.0 › New datalog-based query engine" uri="https://www.forester-notes.org/jms-013A/" display-uri="https://www.forester-notes.org/jms-013A/" type="local">§ <fr:contextual-number uri="https://www.forester-notes.org/jms-013A/" display-uri="https://www.forester-notes.org/jms-013A/" /></fr:link>), as the legacy query engine has been removed.</html:li>
  <html:li>View your forest locally using an HTTP server rather than directly through the file system (see <fr:link href="https://www.forester-notes.org/VNQ8/" title="Forester 5.0 › Changes to how forests are viewed locally and deployed" uri="https://www.forester-notes.org/VNQ8/" display-uri="https://www.forester-notes.org/VNQ8/" type="local">§ <fr:contextual-number uri="https://www.forester-notes.org/VNQ8/" display-uri="https://www.forester-notes.org/VNQ8/" /></fr:link>).</html:li>
  <html:li>Begin dialing back your use of custom XML stylesheets (see <fr:link href="https://www.forester-notes.org/jms-0127/" title="Forester 5.0 › The future of Forester’s XML format" uri="https://www.forester-notes.org/jms-0127/" display-uri="https://www.forester-notes.org/jms-0127/" type="local">§ <fr:contextual-number uri="https://www.forester-notes.org/jms-0127/" display-uri="https://www.forester-notes.org/jms-0127/" /></fr:link>). It is possible that support for customisation at this level will be removed in a future release; if you have innovative customisations that are very important for your use of Forester, consider discussing them on the <fr:link href="mailto:~jonsterling/forester-discuss@lists.sr.ht" type="external">mailing list</fr:link> so that maintainers can better understand the problems you are solving.</html:li></html:ol>
              </fr:mainmatter>
            </fr:tree>
            <fr:tree show-metadata="false">
              <fr:frontmatter>
                <fr:authors>
                  <fr:author>
                    <fr:link href="https://www.forester-notes.org/jonmsterling/" title="Jon Sterling" uri="https://www.forester-notes.org/jonmsterling/" display-uri="https://www.forester-notes.org/jonmsterling/" type="local">Jon Sterling</fr:link>
                  </fr:author>
                </fr:authors>
                <fr:date>
                  <fr:year>2024</fr:year>
                  <fr:month>10</fr:month>
                  <fr:day>20</fr:day>
                </fr:date>
                <fr:uri>https://www.forester-notes.org/jms-011Q/</fr:uri>
                <fr:display-uri>https://www.forester-notes.org/jms-011Q/</fr:display-uri>
                <fr:route>https://www.forester-notes.org/jms-011Q/</fr:route>
                <fr:title text="Canonical URLs for tree addresses">Canonical URLs for tree addresses</fr:title>
              </fr:frontmatter>
              <fr:mainmatter>
                <html:p>Up until this release, Forester’s trees were addressed by short strings — which, by convention, might be of the form <html:code>xxx-NNNN</html:code> or some arbitrary string like <html:code>sterling-2021-thesis</html:code>. In order to prepare for the future in which multiple forests can be glued together, we replace Forester’s short names with fully qualified URLs that point to the location on the World Wide Web where a given tree would be published (if you choose to publish it). In your <html:code>forest.toml</html:code> configuration, first set a base URL for your forest like the following:</html:p>
                <html:pre><![CDATA[[forest]
url = "https://www.forester-notes.com/"]]></html:pre>
                <html:p>Within this forest, a tree named <html:code>foo</html:code> is then associated to the canonical URL <html:code>https://www.forester-notes.com/foo/</html:code>. Forester’s renderer will produce the correct directory structure so that if you were to upload the contents of the <html:code>output</html:code> directory to <html:code>https://www.forester-notes.com/</html:code>, a link to <html:code>https://www.forester-notes.com/foo/</html:code> would bring you to the <html:code>foo</html:code> tree.</html:p>
                <html:p>Hyperlinks in Forester source code to trees within your own forest will automatically expand the short name <html:code>foo</html:code> to the canonical URL <html:code>https://www.forester-notes.com/foo/</html:code>. Canonical URLs are used as vertices in the <fr:link href="https://www.forester-notes.org/jms-013A/" title="Forester 5.0 › New datalog-based query engine" uri="https://www.forester-notes.org/jms-013A/" display-uri="https://www.forester-notes.org/jms-013A/" type="local">graph</fr:link>.</html:p>
                <fr:tree show-metadata="false">
                  <fr:frontmatter>
                    <fr:authors>
                      <fr:author>
                        <fr:link href="https://www.forester-notes.org/jonmsterling/" title="Jon Sterling" uri="https://www.forester-notes.org/jonmsterling/" display-uri="https://www.forester-notes.org/jonmsterling/" type="local">Jon Sterling</fr:link>
                      </fr:author>
                    </fr:authors>
                    <fr:date>
                      <fr:year>2024</fr:year>
                      <fr:month>10</fr:month>
                      <fr:day>20</fr:day>
                    </fr:date>
                    <fr:uri>https://www.forester-notes.org/jms-011R/</fr:uri>
                    <fr:display-uri>https://www.forester-notes.org/jms-011R/</fr:display-uri>
                    <fr:route>https://www.forester-notes.org/jms-011R/</fr:route>
                    <fr:title text="What do we mean by “URL”?">What do we mean by “URL”?</fr:title>
                  </fr:frontmatter>
                  <fr:mainmatter>
                    <html:p>Today, “URLs” are a mostly implementation-defined concept that can only be understood by looking at the source code of major web browsers; in the future, this may congeal into an actual standard but today is not that day (nor is tomorrow, if the state of the <fr:link href="https://url.spec.whatwg.org/" type="external"><html:code>whatwg/url</html:code> “living” [non-]standard</fr:link> is any indication). It is best to think of Forester’s approach to URLs as provisional and subject to evolution as the Web continues to mature.</html:p>
                  </fr:mainmatter>
                </fr:tree>
              </fr:mainmatter>
            </fr:tree>
            <fr:tree show-metadata="false">
              <fr:frontmatter>
                <fr:authors>
                  <fr:author>
                    <fr:link href="https://www.forester-notes.org/jonmsterling/" title="Jon Sterling" uri="https://www.forester-notes.org/jonmsterling/" display-uri="https://www.forester-notes.org/jonmsterling/" type="local">Jon Sterling</fr:link>
                  </fr:author>
                </fr:authors>
                <fr:date>
                  <fr:year>2024</fr:year>
                  <fr:month>10</fr:month>
                  <fr:day>20</fr:day>
                </fr:date>
                <fr:uri>https://www.forester-notes.org/OYOT/</fr:uri>
                <fr:display-uri>https://www.forester-notes.org/OYOT/</fr:display-uri>
                <fr:route>https://www.forester-notes.org/OYOT/</fr:route>
                <fr:title text="Simplifications to the source language">Simplifications to the source language</fr:title>
              </fr:frontmatter>
              <fr:mainmatter>
                <fr:tree show-metadata="false">
                  <fr:frontmatter>
                    <fr:authors>
                      <fr:author>
                        <fr:link href="https://www.forester-notes.org/jonmsterling/" title="Jon Sterling" uri="https://www.forester-notes.org/jonmsterling/" display-uri="https://www.forester-notes.org/jonmsterling/" type="local">Jon Sterling</fr:link>
                      </fr:author>
                    </fr:authors>
                    <fr:date>
                      <fr:year>2024</fr:year>
                      <fr:month>10</fr:month>
                      <fr:day>20</fr:day>
                    </fr:date>
                    <fr:uri>https://www.forester-notes.org/OYOU/</fr:uri>
                    <fr:display-uri>https://www.forester-notes.org/OYOU/</fr:display-uri>
                    <fr:route>https://www.forester-notes.org/OYOU/</fr:route>
                    <fr:title text="Removal of imports within subtrees">Removal of imports within subtrees</fr:title>
                  </fr:frontmatter>
                  <fr:mainmatter>
                    <html:p>It is no longer permitted to have an <html:code><![CDATA[\import]]></html:code> declaration within a subtree: these can occur only at the top level of a file and therefore have file-level scope.</html:p>
                  </fr:mainmatter>
                </fr:tree>
                <fr:tree show-metadata="false">
                  <fr:frontmatter>
                    <fr:authors>
                      <fr:author>
                        <fr:link href="https://www.forester-notes.org/jonmsterling/" title="Jon Sterling" uri="https://www.forester-notes.org/jonmsterling/" display-uri="https://www.forester-notes.org/jonmsterling/" type="local">Jon Sterling</fr:link>
                      </fr:author>
                    </fr:authors>
                    <fr:date>
                      <fr:year>2024</fr:year>
                      <fr:month>10</fr:month>
                      <fr:day>20</fr:day>
                    </fr:date>
                    <fr:uri>https://www.forester-notes.org/jms-011T/</fr:uri>
                    <fr:display-uri>https://www.forester-notes.org/jms-011T/</fr:display-uri>
                    <fr:route>https://www.forester-notes.org/jms-011T/</fr:route>
                    <fr:title text="Removing transclusion overrides">Removing transclusion overrides</fr:title>
                  </fr:frontmatter>
                  <fr:mainmatter>
                    <html:p>In prior versions of Forester, it was possible to override the title and the taxon of a transcluded tree using the fluid bindings <html:code><![CDATA[\transclude/title]]></html:code> and <html:code><![CDATA[\transclude/taxon]]></html:code> respectively. This feature is no longer supported in <fr:link href="https://www.forester-notes.org/jms-011P/" title="Forester 5.0" uri="https://www.forester-notes.org/jms-011P/" display-uri="https://www.forester-notes.org/jms-011P/" type="local">Forester 5.0</fr:link>, and existing users are encouraged to purge their use of it prior to upgrading to <fr:link href="https://www.forester-notes.org/jms-011P/" title="Forester 5.0" uri="https://www.forester-notes.org/jms-011P/" display-uri="https://www.forester-notes.org/jms-011P/" type="local">Forester 5.0</fr:link>.</html:p>
                    <html:p>In short, supporting this feature was greatly complicating the planned transition to a genuine hypermedia format; it could also be argued that it might have led to scenarios where an original author’s intentions are violated at the transclusion site.</html:p>
                    <html:p>Please note that transclusion options, such as <html:code><![CDATA[\transclude/expanded]]></html:code>, etc., are still supported.</html:p>
                  </fr:mainmatter>
                </fr:tree>
                <fr:tree show-metadata="false">
                  <fr:frontmatter>
                    <fr:authors>
                      <fr:author>
                        <fr:link href="https://www.forester-notes.org/jonmsterling/" title="Jon Sterling" uri="https://www.forester-notes.org/jonmsterling/" display-uri="https://www.forester-notes.org/jonmsterling/" type="local">Jon Sterling</fr:link>
                      </fr:author>
                    </fr:authors>
                    <fr:date>
                      <fr:year>2024</fr:year>
                      <fr:month>10</fr:month>
                      <fr:day>20</fr:day>
                    </fr:date>
                    <fr:uri>https://www.forester-notes.org/OYOV/</fr:uri>
                    <fr:display-uri>https://www.forester-notes.org/OYOV/</fr:display-uri>
                    <fr:route>https://www.forester-notes.org/OYOV/</fr:route>
                    <fr:title text="Removal of autocapitalisation">Removal of autocapitalisation</fr:title>
                  </fr:frontmatter>
                  <fr:mainmatter>
                    <html:p>Titles and taxa will no longer be autocapitalised: this feature biases Forester toward specific languages and is annoyingly complex to maintain. Therefore, you must rename all your titles and taxa to be capitalised by hand.  This can be done in VS Code using the following regexp: replace <html:code><![CDATA[\\taxon\{([a-z])]]></html:code> with <html:code><![CDATA[\\taxon{\U$1]]></html:code>, etc.</html:p>
                  </fr:mainmatter>
                </fr:tree>
              </fr:mainmatter>
            </fr:tree>
            <fr:tree show-metadata="false">
              <fr:frontmatter>
                <fr:authors>
                  <fr:author>
                    <fr:link href="https://www.forester-notes.org/jonmsterling/" title="Jon Sterling" uri="https://www.forester-notes.org/jonmsterling/" display-uri="https://www.forester-notes.org/jonmsterling/" type="local">Jon Sterling</fr:link>
                  </fr:author>
                </fr:authors>
                <fr:date>
                  <fr:year>2024</fr:year>
                  <fr:month>10</fr:month>
                  <fr:day>20</fr:day>
                </fr:date>
                <fr:uri>https://www.forester-notes.org/jms-0125/</fr:uri>
                <fr:display-uri>https://www.forester-notes.org/jms-0125/</fr:display-uri>
                <fr:route>https://www.forester-notes.org/jms-0125/</fr:route>
                <fr:title text="Configuration: the [renderer] section">Configuration: the <html:code>[renderer]</html:code> section</fr:title>
              </fr:frontmatter>
              <fr:mainmatter>
                <html:p>The TOML configuration file now has a new section called <html:code>[renderer]</html:code>, which groups settings that pertain not to the evaluation of the forest but rather to the rendered output. A sample configuration might look like the following:</html:p>
                <html:pre><![CDATA[[renderer]
home = "index"]]></html:pre>
                <html:p>In the <html:code>[forest]</html:code> section, the <html:code>root</html:code> key was previously used to designate a particular tree as the home page which will be routed to <html:code>index.xml</html:code>. Calling this the “root” didn’t make sense, because it is not actually the root of the forest in most cases. This configuration key has been renamed to <html:code>home</html:code> and placed in the <html:code>[renderer]</html:code> section.</html:p>
              </fr:mainmatter>
            </fr:tree>
            <fr:tree show-metadata="false">
              <fr:frontmatter>
                <fr:authors>
                  <fr:author>
                    <fr:link href="https://www.forester-notes.org/jonmsterling/" title="Jon Sterling" uri="https://www.forester-notes.org/jonmsterling/" display-uri="https://www.forester-notes.org/jonmsterling/" type="local">Jon Sterling</fr:link>
                  </fr:author>
                </fr:authors>
                <fr:date>
                  <fr:year>2024</fr:year>
                  <fr:month>10</fr:month>
                  <fr:day>20</fr:day>
                </fr:date>
                <fr:uri>https://www.forester-notes.org/jms-012N/</fr:uri>
                <fr:display-uri>https://www.forester-notes.org/jms-012N/</fr:display-uri>
                <fr:route>https://www.forester-notes.org/jms-012N/</fr:route>
                <fr:title text="Changes to attribution links">Changes to attribution links</fr:title>
              </fr:frontmatter>
              <fr:mainmatter>
                <html:p>In prior versions, the <html:code><![CDATA[\author]]></html:code> and <html:code><![CDATA[\contributor]]></html:code> command would detect whether its contents were the address of a tree; if so, it would create a wikilink to the tree and otherwise, the included text would appear directly. This feature was convenient for smoothly handling the case that an author of a given resource is not represented in the forest by a biographical tree; the downside is that it makes the assumption that at compiletime we shall know the entire contents of the forest (and, thus, whether a given address shall be bound to a tree).</html:p>
                <html:p>To simplify the handling of author links and make it compatible with the open-world future of Forester, the behaviour is changed as follows:</html:p>
                <html:ol><html:li>The argument to <html:code><![CDATA[\author]]></html:code> and <html:code><![CDATA[\author]]></html:code> <html:em>must</html:em> be a (possibly relative) <fr:link href="https://www.forester-notes.org/jms-011Q/" title="Forester 5.0 › Canonical URLs for tree addresses" uri="https://www.forester-notes.org/jms-011Q/" display-uri="https://www.forester-notes.org/jms-011Q/" type="local">Forester URL</fr:link>. Thus, on my own forest, it would be OK to have either <html:code><![CDATA[\author{jeanbénabou}]]></html:code> or <html:code><![CDATA[\author{forest://jonmsterling/jeanbénabou}]]></html:code> but it would not be OK to have <html:code><![CDATA[\author{Jean Bénabou}]]></html:code>.</html:li>
  <html:li>To make an unlinked attribution containing, use <html:code><![CDATA[\author/literal{Jean Bénabou}]]></html:code>.</html:li></html:ol>
              </fr:mainmatter>
            </fr:tree>
            <fr:tree show-metadata="false">
              <fr:frontmatter>
                <fr:authors>
                  <fr:author>
                    <fr:link href="https://www.forester-notes.org/jonmsterling/" title="Jon Sterling" uri="https://www.forester-notes.org/jonmsterling/" display-uri="https://www.forester-notes.org/jonmsterling/" type="local">Jon Sterling</fr:link>
                  </fr:author>
                </fr:authors>
                <fr:date>
                  <fr:year>2024</fr:year>
                  <fr:month>10</fr:month>
                  <fr:day>20</fr:day>
                </fr:date>
                <fr:uri>https://www.forester-notes.org/jms-013A/</fr:uri>
                <fr:display-uri>https://www.forester-notes.org/jms-013A/</fr:display-uri>
                <fr:route>https://www.forester-notes.org/jms-013A/</fr:route>
                <fr:title text="New datalog-based query engine">New datalog-based query engine</fr:title>
              </fr:frontmatter>
              <fr:mainmatter>
                <html:p>As the query engine has evolved, it has become a bit unwieldy and misshapen. In order to prevent further churn and facilitate the long-term development and use of Forester, we are replacing the query engine and graph analysis with a more general tool: <html:em>datalog</html:em>. With this change comes the ability to introduce arbitrary relations of any arity; this is a powerful and dangerous tool, so use it wisely.</html:p>
                <fr:tree show-metadata="false">
                  <fr:frontmatter>
                    <fr:authors>
                      <fr:author>
                        <fr:link href="https://www.forester-notes.org/jonmsterling/" title="Jon Sterling" uri="https://www.forester-notes.org/jonmsterling/" display-uri="https://www.forester-notes.org/jonmsterling/" type="local">Jon Sterling</fr:link>
                      </fr:author>
                    </fr:authors>
                    <fr:date>
                      <fr:year>2024</fr:year>
                      <fr:month>10</fr:month>
                      <fr:day>20</fr:day>
                    </fr:date>
                    <fr:uri>https://www.forester-notes.org/jms-013B/</fr:uri>
                    <fr:display-uri>https://www.forester-notes.org/jms-013B/</fr:display-uri>
                    <fr:route>https://www.forester-notes.org/jms-013B/</fr:route>
                    <fr:title text="On performance trade-offs">On performance trade-offs</fr:title>
                  </fr:frontmatter>
                  <fr:mainmatter>
                    <html:p>Switching to datalog makes forests that make heavy use of queries a bit slower to render. We considered this trade-off carefully, but believe that for the long-term health of Forester, this is acceptable. In the near future, Forester will render trees on demand rather than all at once (except when you are preparing a static archive for upload/deployment); in this mode of use, Forester will be faster than ever.</html:p>
                  </fr:mainmatter>
                </fr:tree>
                <fr:tree show-metadata="false">
                  <fr:frontmatter>
                    <fr:authors>
                      <fr:author>
                        <fr:link href="https://www.forester-notes.org/jonmsterling/" title="Jon Sterling" uri="https://www.forester-notes.org/jonmsterling/" display-uri="https://www.forester-notes.org/jonmsterling/" type="local">Jon Sterling</fr:link>
                      </fr:author>
                    </fr:authors>
                    <fr:date>
                      <fr:year>2024</fr:year>
                      <fr:month>10</fr:month>
                      <fr:day>20</fr:day>
                    </fr:date>
                    <fr:uri>https://www.forester-notes.org/jms-013C/</fr:uri>
                    <fr:display-uri>https://www.forester-notes.org/jms-013C/</fr:display-uri>
                    <fr:route>https://www.forester-notes.org/jms-013C/</fr:route>
                    <fr:title text="Renamed built-in relations">Renamed built-in relations</fr:title>
                  </fr:frontmatter>
                  <fr:mainmatter>
                    <html:p>Forester’s built-in binary relations have been accessible via macros like <html:code><![CDATA[\rel/authors]]></html:code>, etc. In this release, these relations are being renamed to make them more pleasant and consistent to use with datalog.</html:p>
                    <html:table>
   <html:tr>
    <html:th>Old name</html:th>
    <html:th>New name</html:th>
   </html:tr>
   
   <html:tr>
    <html:td><html:code><![CDATA[\]]>rel/tags</html:code></html:td>
    <html:td><html:code><![CDATA[\]]>rel/has-tag</html:code></html:td>
   </html:tr>
  
   
   <html:tr>
    <html:td><html:code><![CDATA[\]]>rel/taxa</html:code></html:td>
    <html:td><html:code><![CDATA[\]]>rel/has-taxon</html:code></html:td>
   </html:tr>
  
   
   <html:tr>
    <html:td><html:code><![CDATA[\]]>rel/authors</html:code></html:td>
    <html:td><html:code><![CDATA[\]]>rel/has-author</html:code></html:td>
   </html:tr>
  
   
   <html:tr>
    <html:td><html:code><![CDATA[\]]>rel/contributors</html:code></html:td>
    <html:td><html:code><![CDATA[\]]>rel/has-direct-contributor</html:code></html:td>
   </html:tr>
  
   
   <html:tr>
    <html:td><html:code><![CDATA[\]]>rel/transclusion</html:code></html:td>
    <html:td><html:code><![CDATA[\]]>rel/transcludes</html:code></html:td>
   </html:tr>
  
   
   <html:tr>
    <html:td><html:code><![CDATA[\]]>rel/links</html:code></html:td>
    <html:td><html:code><![CDATA[\]]>rel/links-to</html:code></html:td>
   </html:tr>
  
  </html:table>
                  </fr:mainmatter>
                </fr:tree>
                <fr:tree show-metadata="false">
                  <fr:frontmatter>
                    <fr:authors>
                      <fr:author>
                        <fr:link href="https://www.forester-notes.org/jonmsterling/" title="Jon Sterling" uri="https://www.forester-notes.org/jonmsterling/" display-uri="https://www.forester-notes.org/jonmsterling/" type="local">Jon Sterling</fr:link>
                      </fr:author>
                    </fr:authors>
                    <fr:date>
                      <fr:year>2024</fr:year>
                      <fr:month>10</fr:month>
                      <fr:day>20</fr:day>
                    </fr:date>
                    <fr:uri>https://www.forester-notes.org/jms-013D/</fr:uri>
                    <fr:display-uri>https://www.forester-notes.org/jms-013D/</fr:display-uri>
                    <fr:route>https://www.forester-notes.org/jms-013D/</fr:route>
                    <fr:title text="New built-in relations">New built-in relations</fr:title>
                  </fr:frontmatter>
                  <fr:mainmatter>
                    <html:p>A few new built-in relations have been added.</html:p>
                    <html:ul><html:li><html:code><![CDATA[\]]>rel/is-node ?X</html:code> is a unary relation that holds for <html:em>any</html:em> tree address <html:code>?X</html:code>. This is needed when specifying reflexive binary relations: the clause <html:code>R ?X ?X -:</html:code> is not allowed by datalog, so one must use <html:code><![CDATA[R ?X ?X -: {\rel/is-node X}]]></html:code>.</html:li>
   <html:li><html:code><![CDATA[\]]>rel/transcludes/transitive-closure</html:code> is the transitive closure of <html:code><![CDATA[\]]>rel/transcludes</html:code>.</html:li>
   <html:li><html:code><![CDATA[\]]>rel/transcludes/reflexive-transitive-closure</html:code> is the <html:em>reflexive</html:em> transitive closure of <html:code><![CDATA[\]]>rel/transcludes</html:code>.</html:li>
   <html:li><html:code><![CDATA[\]]>rel/is-reference ?X</html:code> holds when <html:code>?X</html:code> is designated as a reference/bibliographical tree. Currently, the built-in rules of the database deduce <html:code><![CDATA[\]]>rel/is-reference ?X</html:code> for any tree <html:code>?X</html:code> with taxon <html:code>reference</html:code>. The purpose of abstracting from the taxon is to enable non-English users of Forester to benefit from the computation of bibliographies.</html:li>
   <html:li>Similarly, <html:code><![CDATA[\]]>rel/is-person ?X</html:code> holds when <html:code>?X</html:code> is designated as a personal/biographical tree. Currently, the built-in rules of the database deduce <html:code><![CDATA[\]]>rel/is-reference ?X</html:code> for any tree <html:code>?X</html:code> with taxon <html:code>person</html:code>.</html:li>
   <html:li><html:code><![CDATA[\]]>rel/in-bundle-closure ?X ?Y</html:code> is the reflexive transitive closure of the union of the transclusion relation with the relation of <html:code>?X</html:code> requiring the asset <html:code>?Y</html:code>. The purpose of this relation is to easily bundle up fragments of a forest (see <fr:link href="https://www.forester-notes.org/30FN/" title="Forester 5.0 › Publishing and implanting forests" uri="https://www.forester-notes.org/30FN/" display-uri="https://www.forester-notes.org/30FN/" type="local">§ <fr:contextual-number uri="https://www.forester-notes.org/30FN/" display-uri="https://www.forester-notes.org/30FN/" /></fr:link>).</html:li></html:ul>
                    <html:p>All of these built-in relations can be defined in Forester’s dialect of datalog; they are predefined for convenience, and because they are used in the computation of backmatter.</html:p>
                  </fr:mainmatter>
                </fr:tree>
                <fr:tree show-metadata="false">
                  <fr:frontmatter>
                    <fr:authors>
                      <fr:author>
                        <fr:link href="https://www.forester-notes.org/jonmsterling/" title="Jon Sterling" uri="https://www.forester-notes.org/jonmsterling/" display-uri="https://www.forester-notes.org/jonmsterling/" type="local">Jon Sterling</fr:link>
                      </fr:author>
                    </fr:authors>
                    <fr:date>
                      <fr:year>2024</fr:year>
                      <fr:month>10</fr:month>
                      <fr:day>20</fr:day>
                    </fr:date>
                    <fr:uri>https://www.forester-notes.org/jms-013E/</fr:uri>
                    <fr:display-uri>https://www.forester-notes.org/jms-013E/</fr:display-uri>
                    <fr:route>https://www.forester-notes.org/jms-013E/</fr:route>
                    <fr:title text="An example datalog query">An example datalog query</fr:title>
                    <fr:taxon>Example</fr:taxon>
                  </fr:frontmatter>
                  <fr:mainmatter>
                    <html:p>In order to illustrate the use of the datalog engine, I will show how to construct a query that will find all the trees with taxon <html:code>reference</html:code> written by <html:code>jonmsterling</html:code> that are tagged either <html:code>accepted</html:code> or <html:code>refereed</html:code>. The first thing we must do is define the smallest relation containing all trees tagged <html:code>accepted</html:code> or <html:code>refereed</html:code>; this is done by adding clauses to the database as follows.</html:p>
                    <html:p>First we define the name of a relation. In the current release, relations are global strings and there is no facility to generate a “fresh” one; that may change in the future.</html:p>
                    <html:pre><![CDATA[\let\rel/accepted-or-refereed{jonmsterling.query.bibliography.accepted-or-refereed}]]></html:pre>
                    <html:p>Next, we add two defining clauses for our relation. In what follows, <html:code><![CDATA[\datalog]]></html:code> simply delimits content that should be parsed as a datalog expression, and <html:code><![CDATA[\execute]]></html:code> instructs Forester to execute the datalog expression.</html:p>
                    <html:pre><![CDATA[\execute\datalog{
 \rel/accepted-or-refereed ?X -: {\rel/has-tag ?X '{refereed}}
}

\execute\datalog{
 \rel/accepted-or-refereed ?X -: {\rel/has-tag ?X '{accepted}}
}]]></html:pre>
                    <html:p>The left-hand side of the reversed turnstile <html:code>-:</html:code> is a proposition representing the <html:em>goal</html:em>; the right hand side is given by propositions representing the premises, each surrounded in braces and separated by whitespace. Metavariables are written with a question mark sigil. Literal content is embedded into a datalog proposition by surrounding it in <html:code>'{...}</html:code>; we will see that literal content is one kind of vertex in the graph database.</html:p>
                    <html:p>Now that we have actually defined the relation that we will use, we can run a query:</html:p>
                    <html:pre><![CDATA[\query\datalog{
 ?X -:
   {\rel/has-author ?X @{jonmsterling}}
   {\rel/is-reference ?X}
   {\rel/accepted-or-refereed ?X}
 }]]></html:pre>
                    <html:p>The structure of a query identifies the metavariable being solved behind the turnstile, and then lists the clauses that must hold. Whereas a content vertex is addressed via <html:code>'{...}</html:code>, a <fr:link href="https://www.forester-notes.org/jms-011Q/" title="Forester 5.0 › Canonical URLs for tree addresses" uri="https://www.forester-notes.org/jms-011Q/" display-uri="https://www.forester-notes.org/jms-011Q/" type="local">URL vertex</fr:link> is addressed using <html:code>@{...}</html:code>.</html:p>
                  </fr:mainmatter>
                </fr:tree>
              </fr:mainmatter>
            </fr:tree>
            <fr:tree show-metadata="false">
              <fr:frontmatter>
                <fr:authors>
                  <fr:author>
                    <fr:link href="https://www.forester-notes.org/jonmsterling/" title="Jon Sterling" uri="https://www.forester-notes.org/jonmsterling/" display-uri="https://www.forester-notes.org/jonmsterling/" type="local">Jon Sterling</fr:link>
                  </fr:author>
                </fr:authors>
                <fr:date>
                  <fr:year>2024</fr:year>
                  <fr:month>10</fr:month>
                  <fr:day>20</fr:day>
                </fr:date>
                <fr:uri>https://www.forester-notes.org/30FN/</fr:uri>
                <fr:display-uri>https://www.forester-notes.org/30FN/</fr:display-uri>
                <fr:route>https://www.forester-notes.org/30FN/</fr:route>
                <fr:title text="Publishing and implanting forests">Publishing and implanting forests</fr:title>
              </fr:frontmatter>
              <fr:mainmatter>
                <html:p>Forester now includes an experimental feature to “publish” a portion of your forest to a JSON blob that can be read by Forester and implanted into another forest. For example, if you include the following code in a tree within your forest, then a file will be emitted at <html:code>publications/my-forest.json</html:code> containing the compiled content of your entire forest, together with all the assets:</html:p>
                <html:pre><![CDATA[\publish-query{my-forest}{
 \datalog{
  ?X -: {\rel/is-node ?X}
 }
}]]></html:pre>
                <html:p>Of course, more sophisticated queries can be used. For example, you can emit all the items tagged <html:code>public</html:code> together with anything they (transitively) transclude and any assets they require as follows:</html:p>
                <html:pre><![CDATA[\publish-query{my-public-forest}{
 \datalog{
   ?X -: {\rel/has-tag ?Z '{public}} {\rel/in-bundle-closure ?Z ?X}
 }
}]]></html:pre>
                <html:p>To implant the resulting JSON file into another forest, simply copy over the file and add the following line to your configuration file:</html:p>
                <html:pre><![CDATA[foreign = ["my-public-forest.json"]]]></html:pre>
                <html:p><html:mark>This feature is highly experimental and has many limitations; it <html:em>will</html:em> change in breaking ways in the future.</html:mark> Although we are very interested to learn about the limitations of this feature, we will be taking a hands-off approach to support until the feature has taken a more stable form.</html:p>
              </fr:mainmatter>
            </fr:tree>
            <fr:tree show-metadata="false">
              <fr:frontmatter>
                <fr:authors>
                  <fr:author>
                    <fr:link href="https://www.forester-notes.org/jonmsterling/" title="Jon Sterling" uri="https://www.forester-notes.org/jonmsterling/" display-uri="https://www.forester-notes.org/jonmsterling/" type="local">Jon Sterling</fr:link>
                  </fr:author>
                </fr:authors>
                <fr:date>
                  <fr:year>2024</fr:year>
                  <fr:month>10</fr:month>
                  <fr:day>20</fr:day>
                </fr:date>
                <fr:uri>https://www.forester-notes.org/VNQ8/</fr:uri>
                <fr:display-uri>https://www.forester-notes.org/VNQ8/</fr:display-uri>
                <fr:route>https://www.forester-notes.org/VNQ8/</fr:route>
                <fr:title text="Changes to how forests are viewed locally and deployed">Changes to how forests are viewed locally and deployed</fr:title>
              </fr:frontmatter>
              <fr:mainmatter>
                <html:p>In the past, Forester’s XML output used relative URLs for all links. This was tractable because the output had no directory structure, but this is increasingly becoming problematic—for example, <fr:link href="https://www.forester-notes.org/30FN/" title="Forester 5.0 › Publishing and implanting forests" uri="https://www.forester-notes.org/30FN/" display-uri="https://www.forester-notes.org/30FN/" type="local">foreign trees</fr:link> are going to be rendered to a subdirectory, but this breaks all the relative URLs. I have come to the conclusion that the only way forward is to use absolute URLs for everything, but this assumes that the output is being served from the root directory of some host. As a result, users <html:em>must</html:em> fire up an HTTP server in order to view their forest locally. With this release we will (TODO) include a built-in HTTP server, but early adopters can simply run <html:code>python3 -m http.server 8000</html:code> from the <html:code>output</html:code> directory and open <html:code>localhost:8000/index.xml</html:code> in their browser.</html:p>
                <html:p>Some users may wish to deploy their forest somewhere other than the root directory of a given (sub)domain. To achieve this and have all your links work correctly, enter the following configuration:</html:p>
                <html:pre><![CDATA[[renderer]
base_url = "my-subfolder/"]]></html:pre>
              </fr:mainmatter>
            </fr:tree>
            <fr:tree show-metadata="false">
              <fr:frontmatter>
                <fr:authors>
                  <fr:author>
                    <fr:link href="https://www.forester-notes.org/jonmsterling/" title="Jon Sterling" uri="https://www.forester-notes.org/jonmsterling/" display-uri="https://www.forester-notes.org/jonmsterling/" type="local">Jon Sterling</fr:link>
                  </fr:author>
                </fr:authors>
                <fr:date>
                  <fr:year>2024</fr:year>
                  <fr:month>10</fr:month>
                  <fr:day>20</fr:day>
                </fr:date>
                <fr:uri>https://www.forester-notes.org/jms-0127/</fr:uri>
                <fr:display-uri>https://www.forester-notes.org/jms-0127/</fr:display-uri>
                <fr:route>https://www.forester-notes.org/jms-0127/</fr:route>
                <fr:title text="The future of Forester’s XML format">The future of Forester’s XML format</fr:title>
              </fr:frontmatter>
              <fr:mainmatter>
                <html:p>Forester currently emits archival-quality output in a custom XML format that is then interpreted using an XSLT stylesheet (as part of the <fr:link href="https://git.sr.ht/~jonsterling/forester-base-theme" type="external">“theme”</fr:link>). This format has served us well, enabling users to customise the presentation of their forests to a great degree. An added benefit of the XML format is to be able to easily convert a tree to LaTeX using another stylesheet.</html:p>
                <html:p>However, the constantly changing XML format has been an equally frustrating source of churn for users of Forester, and I have for some time now been warning users who customise their theme that these customisations are technically possible but <html:em>not</html:em> supported (i.e. we make no promise not to break them).</html:p>
                <html:p>The time is coming when Forester’s interaction model and output format will be changed <html:em>drastically</html:em>; rest assured that the core principles behind Forester (including the ability to generate static archival output that can be hosted anywhere) will be retained. We aim to become a better citizen of the World Wide Web by moving toward a more standard hypermedia format.</html:p>
                <html:p>One possiblity is to extend HTML with just the hypermedia controls and embedded microformats needed for Forester’s operation. This re-coupling of presentation and data would, paradoxically, facilitate Forester to evolve more rapidly over time while simultaneously increasing the longevity of forests that have been compiled using older versions of the tool.</html:p>
              </fr:mainmatter>
            </fr:tree>
          </fr:mainmatter>
        </fr:tree>
        <fr:tree show-metadata="true" expanded="false" toc="false" numbered="false">
          <fr:frontmatter>
            <fr:authors />
            <fr:uri>https://www.jonmsterling.com/kentookura/</fr:uri>
            <fr:display-uri>kentookura</fr:display-uri>
            <fr:route>/kentookura/</fr:route>
            <fr:title text="Kento Okura">Kento Okura</fr:title>
            <fr:taxon>Person</fr:taxon>
            <fr:meta name="external">https://github.com/kentookura</fr:meta>
          </fr:frontmatter>
          <fr:mainmatter />
        </fr:tree>
      </fr:mainmatter>
    </fr:tree>
    <fr:tree show-metadata="false" hidden-when-empty="true">
      <fr:frontmatter>
        <fr:authors />
        <fr:title text="Contributions">Contributions</fr:title>
      </fr:frontmatter>
      <fr:mainmatter />
    </fr:tree>
  </fr:backmatter>
</fr:tree>
