\title{generating images statically using LaTeX}
\date{2023-01-07T13:47:18+01:00}
\author{jonmsterling}

\p{Because of the [general](tfmt-000J) [inadequacy](tfmt-000K) [of](tfmt-000I) the other available tools, most authors of hypertext mathematics with diagramming needs tend to rely on the static generation of images from LaTeX code using a local LaTeX toolchain. It is not difficult to instrument [pandoc](https://www.pandoc.org/) with a [Lua filter to render tikz code to SVG images](https://pandoc.org/lua-filters.html).}

\p{There are also a variety of other tools that do something similar, which tend to be employed in static site generation:}
\ul{
  \li{[antex](https://github.com/paolobrasolin/antex) by [Paolo Brasolin](paolobrasolin) is used by [Krater](https://github.com/paolobrasolin/krater) as well as [jekyll-sheafy](https://github.com/paolobrasolin/jekyll-sheafy), both via [jekyll-antex](https://github.com/paolobrasolin/jekyll-antex).}
  \li{[Forester](jms-005P) by [Jonathan Sterling](jonmsterling) is used by the present web site.}
}


\p{The basic architecture of such a tool is to scan for LaTeX blocks, and then identify them by a \em{hash} of their contents. This hash is used as a filename for \code{\startverb.tex\stopverb} files, which are compiled to \code{\startverb .dvi\stopverb} and thence to \code{\startverb.svg\stopverb} using the \code{\startverb dvisvgm\stopverb} tool; the resulting file is then embedded in HTML using an \code{\startverb<img>\stopverb} tag. Alternatively,  is also possible to transclude the resulting \code{\startverb<svg>\stopverb} element directly, but then [one must be careful to rename all identifiers in the \code{\startverb<svg>\stopverb} element uniquely](https://github.com/paolobrasolin/jekyll-antex/issues/26), as it is possible for two different \code{\startverb<svg>\stopverb} elements on a single page to interfere one each other.}

\p{Both [antex](https://github.com/paolobrasolin/antex) and [Forester](jms-005P) support passing a macro library to be used when rendering. Both [jekyll-sheafy](https://github.com/paolobrasolin/jekyll-sheafy) and [Forester](jms-005P) set their macro libraries on a page-local basis.}

\p{A serious downside of generating images from LaTeX code is the negative impact on accessibility tools. This seems only slightly mitigated by the transclusion of the \code{\startverb<svg>\stopverb} element as opposed to using \code{\startverb<img>\stopverb}. Ultimately accessibility for mathematical diagrams remains an unsolved problem, and it does not seem that the existing discussion on accessibility of hypertext mathematics has much to say about this problem.}
