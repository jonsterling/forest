<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="/default.xsl"?>
<fr:tree xmlns:fr="http://www.forester-notes.org" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:xml="http://www.w3.org/XML/1998/namespace" root="false" base-url="/">
  <fr:frontmatter>
    <fr:authors>
      <fr:author>
        <fr:link href="/mathieuanel/" title="Mathieu Anel" uri="https://www.jonmsterling.com/mathieuanel/" display-uri="mathieuanel" type="local">Mathieu Anel</fr:link>
      </fr:author>
      <fr:author>
        <fr:link href="/andr%C3%A9joyal/" title="André Joyal" uri="https://www.jonmsterling.com/andréjoyal/" display-uri="andréjoyal" type="local">André Joyal</fr:link>
      </fr:author>
    </fr:authors>
    <fr:date>
      <fr:year>2021</fr:year>
      <fr:month>3</fr:month>
      <fr:day>22</fr:day>
    </fr:date>
    <fr:uri>https://www.jonmsterling.com/anel-joyal-2021/</fr:uri>
    <fr:display-uri>anel-joyal-2021</fr:display-uri>
    <fr:route>/anel-joyal-2021/</fr:route>
    <fr:title text="Topo-logie">Topo-logie</fr:title>
    <fr:taxon>Reference</fr:taxon>
    <fr:meta name="doi">10.1017/9781108854429.007</fr:meta>
    <fr:meta name="venue">New Spaces in Mathematics: Formal and Conceptual Reflections, Cambridge University Press</fr:meta>
    <fr:meta name="bibtex"><![CDATA[@inbook{anel-joyal-2021,
  place={Cambridge},
  title={Topo-logie},
  volume={1},
  doi={10.1017/9781108854429.007},
  booktitle={New Spaces in Mathematics: Formal and Conceptual Reflections},
  publisher={Cambridge University Press},
  author={Anel, Mathieu and Joyal, André},
  editor={Anel, Mathieu and Catren, GabrielEditors},
  year={2021},
  pages={155–257}
}]]></fr:meta>
  </fr:frontmatter>
  <fr:mainmatter />
  <fr:backmatter>
    <fr:tree show-metadata="false" hidden-when-empty="true">
      <fr:frontmatter>
        <fr:authors />
        <fr:title text="References">References</fr:title>
      </fr:frontmatter>
      <fr:mainmatter />
    </fr:tree>
    <fr:tree show-metadata="false" hidden-when-empty="true">
      <fr:frontmatter>
        <fr:authors />
        <fr:title text="Context">Context</fr:title>
      </fr:frontmatter>
      <fr:mainmatter />
    </fr:tree>
    <fr:tree show-metadata="false" hidden-when-empty="true">
      <fr:frontmatter>
        <fr:authors />
        <fr:title text="Backlinks">Backlinks</fr:title>
      </fr:frontmatter>
      <fr:mainmatter>
        <fr:tree show-metadata="true" expanded="false" toc="false" numbered="false">
          <fr:frontmatter>
            <fr:authors>
              <fr:author>
                <fr:link href="/jonmsterling/" title="Jon Sterling" uri="https://www.jonmsterling.com/jonmsterling/" display-uri="jonmsterling" type="local">Jon Sterling</fr:link>
              </fr:author>
            </fr:authors>
            <fr:date>
              <fr:year>2023</fr:year>
              <fr:month>9</fr:month>
              <fr:day>5</fr:day>
            </fr:date>
            <fr:uri>https://www.jonmsterling.com/jms-008J/</fr:uri>
            <fr:display-uri>jms-008J</fr:display-uri>
            <fr:route>/jms-008J/</fr:route>
            <fr:title text="Classifying topoi and generalised abstract syntax">Classifying topoi and generalised abstract syntax</fr:title>
          </fr:frontmatter>
          <fr:mainmatter>
            <html:p>For any small category <fr:tex display="inline"><![CDATA[\mathscr {C}]]></fr:tex>, <fr:link href="/fiore-2007-ct/" title="Towards a mathematical theory of substitution" uri="https://www.jonmsterling.com/fiore-2007-ct/" display-uri="fiore-2007-ct" type="local">Fiore</fr:link> <fr:link href="/fiore-2008/" title="Second-order and dependently-sorted abstract syntax" uri="https://www.jonmsterling.com/fiore-2008/" display-uri="fiore-2008" type="local">treats</fr:link> <fr:tex display="inline"><![CDATA[\mathscr {C}]]></fr:tex>-sorted abstract syntax in the functor category <fr:tex display="inline"><![CDATA[{\mathopen {}\left  [\mathscr {C},\operatorname {Pr}{\mathopen {}\left (\operatorname {\mathbb {L}}{\mathscr {C}}\right )\mathclose {}}\right  ]\mathclose {}}]]></fr:tex> where <fr:tex display="inline"><![CDATA[\operatorname {\mathbb {L}}]]></fr:tex> is some 2-monad on <fr:tex display="inline"><![CDATA[\mathbf {Cat}]]></fr:tex>; any such functor <fr:tex display="inline"><![CDATA[P]]></fr:tex> denotes a set that is indexed in sorts and contexts (where the 2-monad <fr:tex display="inline"><![CDATA[\operatorname {\mathbb {L}}]]></fr:tex> takes a category of sorts to the corresponding category of contexts). When <fr:tex display="inline"><![CDATA[\mathscr {C}]]></fr:tex> is a set and <fr:tex display="inline"><![CDATA[\operatorname {\mathbb {L}}]]></fr:tex> is either finite limit or finite product completion, we recover the standard notions of many-sorted abstract syntax; in general, we get a variety of forms of <html:em>dependently sorted</html:em> or <html:em>generalised</html:em> abstract syntax.</html:p>
            <html:p>We will assume here that <fr:tex display="inline"><![CDATA[\operatorname {\mathbb {L}}]]></fr:tex> is the free finite limit completion 2-monad; our goal is to study <fr:link href="/fiore-2008/" title="Second-order and dependently-sorted abstract syntax" uri="https://www.jonmsterling.com/fiore-2008/" display-uri="fiore-2008" type="local">Fiore</fr:link>’s general <html:em>substitution monoidal structure</html:em> from the point of view of classifying topoi, building on <fr:link href="/peterjohnstone/" title="Peter T. Johnstone" uri="https://www.jonmsterling.com/peterjohnstone/" display-uri="peterjohnstone" type="local">Johnstone</fr:link>’s analogous observations (<fr:link href="/johnstone-2002/" title="Sketches of an elephant: a topos theory compendium" uri="https://www.jonmsterling.com/johnstone-2002/" display-uri="johnstone-2002" type="local">Elephant, D3.2</fr:link>) on the non-symmetric monoidal structure of the <html:em>object classifier</html:em>. The topos theoretic viewpoint that we will explore is nothing more than a rephrasing of <fr:link href="/fiore-2007-ct/" title="Towards a mathematical theory of substitution" uri="https://www.jonmsterling.com/fiore-2007-ct/" display-uri="fiore-2007-ct" type="local">Fiore</fr:link>’s account in terms of the Kleisli composition in a 2-monad; nonetheless the perspective of classifying topoi is enlightening, as it provides an explanation for <html:em>precisely</html:em> what internal geometrical structure one expects in a given topos for abstract syntax, potentially leading to improved internal languages.</html:p>
            <html:p>For any small category <fr:tex display="inline"><![CDATA[\mathscr {C}]]></fr:tex>, the category of presheaves <fr:tex display="inline"><![CDATA[\operatorname {Pr}{\mathopen {}\left (\operatorname {\mathbb {L}}\mathscr {C}\right )\mathclose {}}]]></fr:tex> corresponds to the <html:em>classifying topos</html:em> of diagrams of shape <fr:tex display="inline"><![CDATA[\mathscr {C}]]></fr:tex>. Following <fr:link href="/anel-joyal-2021/" title="Topo-logie" uri="https://www.jonmsterling.com/anel-joyal-2021/" display-uri="anel-joyal-2021" type="local">Anel and Joyal</fr:link>, we shall write <fr:tex display="inline"><![CDATA[\mathbb {A}^{\mathscr {C}}]]></fr:tex> for this “affine” classifying topos; under the conventions of <html:em>op. cit.</html:em>, we may then identify the category of sheaves <fr:tex display="inline"><![CDATA[\operatorname {Sh}{\mathbb {A}^{\mathscr {C}}}]]></fr:tex> with the presheaf category <fr:tex display="inline"><![CDATA[\operatorname {Pr}{\mathopen {}\left (\operatorname {\mathbb {L}}{\mathscr {C}}\right )\mathclose {}}]]></fr:tex>.</html:p>
            <html:p>The universal property of <fr:tex display="inline"><![CDATA[\mathbb {A}^{\mathscr {C}}]]></fr:tex> as the classifying topos of <fr:tex display="inline"><![CDATA[\mathscr {C}]]></fr:tex>-diagrams means that for any topos <fr:tex display="inline"><![CDATA[\mathcal {X}]]></fr:tex>, a diagram <fr:tex display="inline"><![CDATA[{\mathscr {C}}\xrightarrow {{P}}{\operatorname {Sh}{\mathcal {X}}}]]></fr:tex> corresponds essentially uniquely (by left Kan extension) to a morphism of topoi <fr:tex display="inline"><![CDATA[{\mathcal {X}}\xrightarrow {{\bar {P}}}{\mathbb {A}^{\mathscr {C}}}]]></fr:tex>. We have a <html:em>generic <fr:tex display="inline"><![CDATA[\mathscr {C}]]></fr:tex>-shaped diagram</html:em> <fr:tex display="inline"><![CDATA[{\mathscr {C}}\xrightarrow {{\mathrm {G}_{\mathscr {C}}}}{\operatorname {Sh}{\mathbb {A}^{\mathscr {C}}}}]]></fr:tex> corresponding under this identification to the identity map on <fr:tex display="inline"><![CDATA[\mathbb {A}^{\mathscr {C}}]]></fr:tex>. More explicitly, the diagram <fr:tex display="inline"><![CDATA[\mathrm {G}_{\mathscr {C}}]]></fr:tex> is the following composite:</html:p>
            <fr:tex display="block"><![CDATA[
  \mathrm {G}_{\mathscr {C}} :\equiv  \mathscr {C}\xrightarrow {\eta _\mathscr {C}} \operatorname {\mathbb {L}}\mathscr {C}\xrightarrow {よ_{\mathscr {C}}} \operatorname {Pr}{\mathopen {}\left (\operatorname {\mathbb {L}}\mathscr {C}\right )\mathclose {}} = \operatorname {Sh}{\mathbb {A}^{\mathscr {C}}}
]]></fr:tex>
            <html:p>Given a morphism of topoi <fr:tex display="inline"><![CDATA[{\mathcal {X}}\xrightarrow {{f}}{\mathbb {A}^{\mathscr {C}}}]]></fr:tex>, we may recover the diagram <fr:tex display="inline"><![CDATA[\mathscr {C}\to {\operatorname {Sh}{\mathcal {X}}}]]></fr:tex> that it classifies as the composite <fr:tex display="inline"><![CDATA[\mathscr {C}\xrightarrow {\mathrm {G}_{\mathscr {C}}}\operatorname {Sh}{\mathbb {A}^{\mathscr {C}}}\xrightarrow {f^{*}}\operatorname {Sh}{\mathcal {X}}]]></fr:tex>.</html:p>
            <html:p>In case <fr:tex display="inline"><![CDATA[\mathcal {X}\equiv \mathbb {A}^{\mathscr {C}}]]></fr:tex>, then, we have a correspondence between <fr:tex display="inline"><![CDATA[\mathscr {C}]]></fr:tex>-shaped diagrams of sheaves on <fr:tex display="inline"><![CDATA[\mathbb {A}^{\mathscr {C}}]]></fr:tex> and endomorphisms of <fr:tex display="inline"><![CDATA[\mathbb {A}^{\mathscr {C}}]]></fr:tex>; <html:mark>we are interested in representing the compositions of such endomorphisms as a <html:em>tensor product</html:em> on the functor category <fr:tex display="inline"><![CDATA[{\mathopen {}\left  [\mathscr {C},\operatorname {Sh}{\mathbb {A}^{\mathscr {C}}}\right  ]\mathclose {}}]]></fr:tex></html:mark>.</html:p>
            <html:p>In particular, let <fr:tex display="inline"><![CDATA[{\mathscr {C}}\xrightarrow {{P,Q}}{\operatorname {Sh}{\mathbb {A}^{\mathscr {C}}}}]]></fr:tex> be two diagrams; taking characteristic maps, we have endomorphisms of affine topoi <fr:tex display="inline"><![CDATA[{\mathbb {A}^{\mathscr {C}}}\xrightarrow {{\bar {P},\bar {Q}}}{\mathbb {A}^{\mathscr {C}}}]]></fr:tex>, which we may compose to obtain <fr:tex display="inline"><![CDATA[{\mathbb {A}^{\mathscr {C}}}\xrightarrow {{\bar {Q}\circ \bar {P}}}{\mathbb {A}^{\mathscr {C}}}]]></fr:tex>; then, we will define the tensor <fr:tex display="inline"><![CDATA[P\bullet  Q]]></fr:tex> to be the diagram whose characteristic morphism of affine topoi is <fr:tex display="inline"><![CDATA[\bar {P}\circ \bar {Q}]]></fr:tex>. In other words:</html:p>
            <fr:tex display="block"><![CDATA[
  \begin {aligned}
    P\bullet  Q
    &:\equiv 
    \mathscr {C}\xrightarrow {\mathrm {G}_{\mathscr {C}}}
    \operatorname {Sh}{\mathbb {A}^{\mathscr {C}}}
    \xrightarrow {{\mathopen {}\left (\bar {P}\circ \bar {Q}\right )\mathclose {}}^{*}}
    \operatorname {Sh}{\mathbb {A}^{\mathscr {C}}}
    \\
    &=
    \mathscr {C}\xrightarrow {\mathrm {G}_{\mathscr {C}}}
    \operatorname {Sh}{\mathbb {A}^{\mathscr {C}}}
    \xrightarrow {\bar {P}^{*}}
    \operatorname {Sh}{\mathbb {A}^{\mathscr {C}}}
    \xrightarrow {\bar {Q}^{*}}
    \operatorname {Sh}{\mathbb {A}^{\mathscr {C}}}
  \end {aligned}
]]></fr:tex>
            <html:p>To give an explicit computation of the tensor product, we first compute the inverse image of any <fr:tex display="inline"><![CDATA[{\mathbb {A}^{\mathscr {C}}}\xrightarrow {{f}}{\mathbb {A}^{\mathscr {C}}}]]></fr:tex> on representables <fr:tex display="inline"><![CDATA[よ_{\mathscr {C}}\Gamma ]]></fr:tex> for <fr:tex display="inline"><![CDATA[\Gamma \in \operatorname {\mathbb {L}}\mathscr {C}]]></fr:tex>. As any left exact functor <fr:tex display="inline"><![CDATA[{\operatorname {\mathbb {L}}\mathscr {C}}\xrightarrow {{H}}{\mathscr {E}}]]></fr:tex> is the right Kan extension of <fr:tex display="inline"><![CDATA[{\mathscr {C}}\xrightarrow {{H\circ \eta _\mathscr {C}}}{\mathscr {E}}]]></fr:tex> along <fr:tex display="inline"><![CDATA[{C}\xrightarrow {{\eta _\mathscr {C}}}{\operatorname {\mathbb {L}}\mathscr {C}}]]></fr:tex>, we can conclude that <fr:tex display="inline"><![CDATA[H\Gamma  \cong  \operatorname {lim}_{\Gamma \to \eta _\mathscr {C}{d}}H{\mathopen {}\left (\eta _\mathscr {C}{d}\right )\mathclose {}}]]></fr:tex>. We will use this in our calculation below, setting <fr:tex display="inline"><![CDATA[H:\equiv  f^{*}\circ よ_{\mathscr {C}}]]></fr:tex>.</html:p>
            <fr:tex display="block"><![CDATA[
  \begin {aligned}
    f^{*}{よ_{\mathscr {C}}\Gamma }
    &\cong 
    \operatorname {lim}_{\Gamma \to \eta _\mathscr {C}{d}}
    f^{*}{
      よ_{\mathscr {C}}{\eta _\mathscr {C}{d}}
    }
    \\
    &\cong 
    \operatorname {lim}_{\Gamma \to \eta _\mathscr {C}{d}}
    f^{*}{\mathrm {G}_{\mathscr {C}}{d}}
  \end {aligned}
]]></fr:tex>
            <html:p>We are now prepared to compute the tensor product of any <fr:tex display="inline"><![CDATA[{\mathscr {C}}\xrightarrow {{P,Q}}{\operatorname {Sh}{\mathbb {A}^{\mathscr {C}}}}]]></fr:tex>.</html:p>
            <fr:tex display="block"><![CDATA[
  \begin {aligned}
    {\mathopen {}\left (P\bullet  Q\right )\mathclose {}}c
    &=
    \bar {Q}^{*}
    \bar {P}^{*}
    \mathrm {G}_{\mathscr {C}}{c}
    \\
    &\cong 
    \bar {Q}^{*}
    {\mathopen {}\left (Pc\right )\mathclose {}}
    \\
    &\cong 
    \bar {Q}^{*}
    \operatorname {colim}_{よ_{\mathscr {C}}\Delta \to  Pc}
    よ_{\mathscr {C}}\Delta 
    \\
    &\cong 
    \operatorname {colim}_{よ_{\mathscr {C}}\Delta \to  Pc}
    \bar {Q}^{*}よ_{\mathscr {C}}\Delta 
    \\
    &\cong 
    \operatorname {colim}_{よ_{\mathscr {C}}\Delta \to  Pc}
    \operatorname {lim}_{\Delta \to  \eta _\mathscr {C}{d}}
    \bar {Q}^{*}\mathrm {G}_{\mathscr {C}}d
    \\
    &\cong 
    \operatorname {colim}_{よ_{\mathscr {C}}\Delta \to  Pc}
    \operatorname {lim}_{\Delta \to  \eta _\mathscr {C}{d}}
    Qd
  \end {aligned}
]]></fr:tex>
            <html:p>Finally, we can relate the computation above to that of <fr:link href="/fiore-2008/" title="Second-order and dependently-sorted abstract syntax" uri="https://www.jonmsterling.com/fiore-2008/" display-uri="fiore-2008" type="local">Fiore</fr:link> in terms of coends.</html:p>
            <fr:tex display="block"><![CDATA[
  \begin {aligned}
    {\mathopen {}\left (P\bullet  Q\right )\mathclose {}}\,c
    &\cong 
    \operatorname {colim}_{よ_{\mathscr {C}}\Delta \to  Pc}
    \operatorname {lim}_{\Delta \to  \eta _\mathscr {C}{d}}
    Qd
    \\
    &\cong 
    \int ^{\Delta \in \operatorname {\mathbb {L}}\mathscr {C}}
    {\mathopen {}\left  [よ_{\mathscr {C}}\Delta ,Pc\right  ]\mathclose {}}
    \cdot 
    \operatorname {lim}_{\Delta \to \eta _\mathscr {C}{d}} Qd
    \\
    &\cong 
    \int ^{\Delta \in \operatorname {\mathbb {L}}\mathscr {C}}
    P\,c\,\Delta 
    \cdot 
    \operatorname {lim}_{\Delta \to \eta _\mathscr {C}{d}} Qd
    \\
    &\cong 
    \int ^{\Delta \in \operatorname {\mathbb {L}}\mathscr {C}}
    P\,c\,\Delta 
    \cdot 
    \int _{c\in \mathscr {C}}
    {\mathopen {}\left  [\Delta ,\eta _\mathscr {C}{d}\right  ]\mathclose {}}\pitchfork  Qd
  \end {aligned}
]]></fr:tex>
            <html:p>Above, we have written <fr:tex display="inline"><![CDATA[{\mathopen {}\left (\cdot \right )\mathclose {}}]]></fr:tex> and <fr:tex display="inline"><![CDATA[{\mathopen {}\left (\pitchfork \right )\mathclose {}}]]></fr:tex> for the tensoring and cotensoring of <fr:tex display="inline"><![CDATA[\operatorname {Sh}{\mathbb {A}^{\mathscr {C}}}]]></fr:tex> over <fr:tex display="inline"><![CDATA[\mathbf {Set}]]></fr:tex> respectively. Thus, the fully pointwise computation is as follows:</html:p>
            <fr:tex display="block"><![CDATA[
  {\mathopen {}\left (P\bullet  Q\right )\mathclose {}}\,c\,\Gamma  \cong 
    \int ^{\Delta \in \operatorname {\mathbb {L}}\mathscr {C}}
    P\,c\,\Delta 
    \times 
    \int _{c\in \mathscr {C}}
    {\mathopen {}\left  [\Delta ,\eta _\mathscr {C}{d}\right  ]\mathclose {}}\Rightarrow  Q\,d\,\Gamma 
]]></fr:tex>
            <html:p>
              <html:em>Thanks to <fr:link href="/marcelofiore/" title="Marcelo Fiore" uri="https://www.jonmsterling.com/marcelofiore/" display-uri="marcelofiore" type="local">Marcelo Fiore</fr:link> and <fr:link href="/danielgratzer/" title="Daniel Gratzer" uri="https://www.jonmsterling.com/danielgratzer/" display-uri="danielgratzer" type="local">Daniel Gratzer</fr:link> for helpful discussions.</html:em>
            </html:p>
          </fr:mainmatter>
        </fr:tree>
      </fr:mainmatter>
    </fr:tree>
    <fr:tree show-metadata="false" hidden-when-empty="true">
      <fr:frontmatter>
        <fr:authors />
        <fr:title text="Related">Related</fr:title>
      </fr:frontmatter>
      <fr:mainmatter />
    </fr:tree>
    <fr:tree show-metadata="false" hidden-when-empty="true">
      <fr:frontmatter>
        <fr:authors />
        <fr:title text="Contributions">Contributions</fr:title>
      </fr:frontmatter>
      <fr:mainmatter />
    </fr:tree>
  </fr:backmatter>
</fr:tree>
